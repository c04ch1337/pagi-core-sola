# pagi-core-sola – Personal AGI template (first app: web dev/coding, personal KBs/skills)
# Copy to .env and customize. Defaults align with bare-metal blueprint.
# Blueprint complete — ready for template use and vertical adaptations.
# Load via shell: source .env
# Sections: General, Rust Core, Python Bridge, Memory/External Services, Self-Evolution

# General: System-wide configs
PAGI_LOG_LEVEL=info  # Log level: trace/debug/info/warn/error
PAGI_PROJECT_ROOT=./  # Root path; relative to cwd
PAGI_FRONTEND_PORT=3000  # Frontend dev server port (e.g. for pagi-frontend)

# Rust Core-Orchestrator: Ports, paths, safety
PAGI_GRPC_PORT=50051  # gRPC listen port for Rust Pagi service
PAGI_MAX_RECURSION_DEPTH=5  # SafetyGovernor depth cap; aligns with Python
PAGI_HITL_GATE=true  # Enable HITL for core patches (true/false)

# Python Intelligence-Bridge: API, models, skills
PAGI_HTTP_PORT=8000  # FastAPI listen port
PAGI_OPENROUTER_MODEL=openrouter/auto  # LiteLLM model; e.g., 'gpt-4o' or 'claude-3.5-sonnet'
PAGI_OPENROUTER_API_KEY=your_openrouter_key_here  # Required for LiteLLM outbound calls
PAGI_ALLOW_OUTBOUND=false  # When true, bridge is allowed to call external LLM providers (used by /rlm structured mode and /llm-gateway)
PAGI_MOCK_MODE=false  # When true, RLM returns deterministic mock response (no LLM/skills). Use for contract testing only; set false for normal chat. UI can override per request via mock_mode.
PAGI_CORS_ORIGINS=*  # Comma-separated origins for browser calls (e.g. http://localhost:3000). Use * for local dev.
PAGI_SKILLS_DIR=src/skills  # Relative to bridge root; for L5 procedural
PAGI_PEEK_MAX_CHARS=2000  # Limit for file peeking to prevent overflow
PAGI_ALLOW_LOCAL_DISPATCH=false  # Allow in-process execution of allow-listed L5 skills for local testing
# When true, allow-list = peek_file, save_skill, execute_skill, list_dir, read_entire_file_safe, write_file_safe, list_files_recursive, analyze_code, search_codebase, run_tests, run_python_code_safe, track_health, track_health_metrics, query_health_trends, health_reminder, manage_finance, track_transactions, get_balance_summary, budget_alert, track_investment, get_portfolio_summary, investment_alert, track_social_activity, query_social_trends, social_sentiment, post_social, manage_email, track_email, query_email_history, email_draft, track_calendar_event (execute_skill enables chaining; personal vertical skills for health/finance/social/email/calendar KB stubs).
PAGI_ALLOW_REAL_DISPATCH=false  # Enables real subprocess execution in Rust — use only in trusted environments. When true, orchestrator runs allow-listed skills via python (no shell; timeout enforced). Requires PAGI_ACTIONS_VIA_GRPC=true on bridge.
PAGI_AGENT_ACTIONS_LOG=  # If set, orchestrator and bridge append ACTION lines here (fallback: PAGI_SELF_HEAL_LOG)
PAGI_VERBOSE_ACTIONS=true  # Print action execution lines to stdout (disable for max throughput)
PAGI_DISABLE_SKILL_IMPORT_CACHE=false  # Disable local skill import caching by mtime (set true during rapid skill iteration)
PAGI_MULTI_TURN_CONTEXT_MAX_TOKENS=  # Optional cap for context accumulation in multi-turn RLM (character-based stub); e.g. 10000
PAGI_MULTI_TURN_CONTEXT_MAX_CHARS=10000  # Cap for chained context in multi-turn RLM (chars)
PAGI_VERTICAL_USE_CASE=research  # research | codegen | code_review | personal (web dev/coding, personal KB, code chain)
PAGI_PERSONAL_KB_NAME=kb_personal  # Personal KB for vertical ops (upload/search in SystemRegistry UI)
PAGI_PERSONAL_HEALTH_KB=kb_health  # Health metrics/tracking KB (personal sub-feature)
PAGI_PERSONAL_FINANCE_KB=kb_finance  # Finance/budgeting KB (personal sub-feature)
PAGI_PERSONAL_SOCIAL_KB=kb_social  # Social media stub/KB (personal sub-feature)
PAGI_PERSONAL_EMAIL_KB=kb_email  # Email stub/KB (personal sub-feature)
PAGI_PERSONAL_CALENDAR_KB=kb_calendar  # Calendar events KB (personal sub-feature)
PAGI_CODEGEN_OUTPUT_DIR=codegen_output  # Output dir for codegen vertical (under PAGI_PROJECT_ROOT); used when PAGI_VERTICAL_USE_CASE=codegen

# Memory/External Services: Qdrant, SurrealDB stubs
PAGI_QDRANT_URI=http://localhost:6334  # Local Qdrant for L4 semantic; cluster URI for scale
PAGI_QDRANT_API_KEY=  # Optional auth for non-local
PAGI_EMBEDDING_DIM=1536  # Vector size cap; matches Sentence Transformers default
PAGI_SURREALDB_PATH=db/surreal.db  # L3-L7 disk storage; relative to core
PAGI_OPENROUTER_GATEWAY=http://localhost:3000  # If using local proxy; else direct

# Self-Evolution: Watchdog, Git, Healing
PAGI_REGISTRY_PATH=../pagi-skills  # Evolution Registry dir; relative to core
PAGI_CORE_DIR=.  # Rust core dir for 'cargo test'
PAGI_BRIDGE_DIR=../pagi-intelligence-bridge  # Python bridge dir for 'poetry run pytest'
PAGI_WATCH_INTERVAL_SECS=60  # Git-Watcher poll interval
PAGI_SELF_HEAL_LOG=agent_actions.log  # If set, Python appends heal reports here
PAGI_ALLOW_SELF_HEAL_GRPC=false  # Enable gRPC self-heal from bridge to orchestrator (true/false); when true, bridge errors trigger ProposePatch/ApplyPatch via gRPC
PAGI_APPROVE_FLAG=approve.patch  # HITL flag file; presence in core dir enables apply for core patches (polled in SimulateError/real heal)
PAGI_HITL_POLL_SECS=30  # Max seconds to poll for PAGI_APPROVE_FLAG before apply when HITL required (SimulateError / real heal)
PAGI_PATCH_DIR=patches  # Subdir in registry for temp patch files (.rs/.py)
PAGI_SELF_PATCH_DIR=patches  # Configurable path for vertical self-patch output (RLM write_file_safe; under PAGI_PROJECT_ROOT)
PAGI_AUTO_COMMIT_SELF_PATCH=true  # Enable Git commit after apply (true/false); when true, successful apply auto-commits to registry
PAGI_AUTO_EVOLVE_SKILLS=true  # Enable auto-evolve after patch (true/false). When true, successful python_skill apply triggers evolve_skill_from_patch and Git commit in bridge repo (auto-evolved skill)

# -----------------------------------------------------------------------------
# Sovereign / full-access profile (OPT-IN; use only on a trusted, isolated machine)
# Uncomment and set below to give the AGI maximum access: file system, OS, apps,
# network, outbound LLM, and real skill execution. Run bridge + orchestrator
# without --reload (or as a system service) for "always on."
# WARNING: This removes safety guardrails. The agent can read/write anywhere
# under PAGI_PROJECT_ROOT, run tests/code, and call external APIs. Use at your own risk.
# -----------------------------------------------------------------------------
# PAGI_FULL_ACCESS=true
# PAGI_PROJECT_ROOT=/  # Unix: full filesystem. Windows: use C:\ or a drive root for broad access
# PAGI_ALLOW_OUTBOUND=true
# PAGI_ALLOW_LOCAL_DISPATCH=true
# PAGI_ACTIONS_VIA_GRPC=true
# PAGI_ALLOW_REAL_DISPATCH=true
# PAGI_VERTICAL_USE_CASE=personal
# PAGI_ALWAYS_ON=true  # Semantic flag: use 'make run-always-on' or run bridge/orchestrator as a service (no --reload)
# PAGI_ALLOW_UI_CONFIG_OVERRIDE=true  # When true, frontend Settings can push sovereign/config overrides to this bridge via POST /api/config
